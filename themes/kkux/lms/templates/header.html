## mako
<%page expression_filter="h" args="online_help_token"/>
<%namespace name='static' file='static_content.html'/>
<%namespace file='main.html' import="login_query"/>
<% 
from django.core.urlresolvers import reverse
from django.utils.translation import ugettext as _, LANGUAGE_SESSION_KEY

from django.conf import settings
from lms.djangoapps.ccx.overrides import get_current_ccx
from openedx.core.djangolib.markup import HTML, Text

# App that handles subdomain specific branding
from branding import api as branding_api
# app that handles site status messages
from status.status import get_site_status_msg
from openedx.core.djangoapps.lang_pref.api import header_language_selector_is_enabled, released_languages

%>
<%page expression_filter="h" args="online_help_token"/>
<style type="text/css">
.usermenu{
    left: 15px;
    float: left;
    padding-left: 0px;
    margin-left: 0px;
}

#header .navbar-default .navbar-nav > li >div> a {
    color: #878787;
    padding-top: 0;
    padding-bottom: 0;
    line-height: 38px;
    font-size: 24px;
    background: none;
  }
#header .nav > li >div> a {
    position: relative;
    display: block;
    padding: 10px 15px;
}
#header .navbar-default .navbar-nav > li >div> a:hover{
text-decoration: none;
}

</style>
<header id="header">
    % if settings.FEATURES.get('IS_UNDER_MAINTENANCE_MESSAGE'):
    <div class="info-msg">
      <i class="fa fa-exclamation-circle"></i>
          % if LANGUAGE_CODE=='en':
              Site is under maintenance. We are building new features for you. Thanks for your patience.
          % else:
              الموقع تحت الصيانة. نحن نبني ميزات جديدة لك. شكرا لصبرك.
          % endif
    </div>    
    % endif
    <nav class="navbar navbar-default">
        <div class="custom-container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/"><img src="${static.url('images/logo.png')}" alt="KKUx" ></a>
              % if header_language_selector_is_enabled():
                <% languages = released_languages() %>
                % if len(languages) > 1:
                  <ol class="user language_dropdown hidden">
                    <li class="primary">
                      <form action="/i18n/setlang/" method="post" class="settings-language-form" id="language-settings-form">
                        <input type="hidden" id="csrf_token" name="csrfmiddlewaretoken" value="${csrf_token}">
                        % if user.is_authenticated():
                          <input title="preference api" type="hidden" class="url-endpoint" value="${reverse('preferences_api', kwargs={'username': user.username})}" data-user-is-authenticated="true">
                        % else:
                          <input title="session update url" type="hidden" class="url-endpoint" value="${reverse('session_language')}" data-user-is-authenticated="false">
                        % endif
                        <label><span class="sr">${_("Choose Language")}</span>
                          <select class="input select language-selector" id="settings-language-value" name="language" hidden="true">
                            % for language in languages:
                              % if language[0] == LANGUAGE_CODE:
                                <option value="${language[0]}" selected="selected">${language[1]}</option>
                              % else:
                                <option value="${language[0]}" >${language[1]}</option>
                              % endif
                            % endfor
                          </select>
                        </label>
                      </form>
                    </li>
                  </ol>
                % endif
              % endif            
                % if request.user.is_authenticated():
                    <ul class="right-top hidden-md  hidden-sm  hidden-lg header-rightbar clearfix">
                      <li><a href="javascript:void(0);" class="language-btn btn" id="language-btn">${('ع' if LANGUAGE_CODE=='en' else 'En')}</a></li>
                      <%include file="user_dropdown.html"/>
                    </ul>
                % else:
                    <ul class="right-top hidden-md  hidden-sm  hidden-lg">
                        <li><a href="javascript:void(0);" class="language-btn btn" id="language-btn">${('ع' if LANGUAGE_CODE=='en' else 'En')}</a></li>
                        <li><a class="btn sign_min" href="${reverse('register_user')}">${_('Register')}</a></li>
                        <li><a class="btn" href="${reverse('signin_user')}">${_('Sign in')}</a></li>
                    </ul>
                % endif
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <div class="vision"><a href="#"><img src="${static.url('images/vision-logo.png')}" alt="KKUx" ></a></div>
                % if request.user.is_authenticated():
                    <ul class="right-top header-rightbar clearfix">
                        <li><a href="javascript:void(0);" class="language-btn btn" id="language-btn">${('ع' if LANGUAGE_CODE=='en' else 'En')}</a></li>
                        <li>
                            <button class="search-toggle"></button>
                            <form class="search" method="get" action="${reverse('courses')}">
                                <input type="search" name="search_query">
                            </form>
                        </li>
                        <%include file="user_dropdown.html"/>  
                    </ul>            
                % else:
                    <ul class="right-top">
                        <li><a href="javascript:void(0);" class="language-btn btn" id="language-btn">${('ع' if LANGUAGE_CODE=='en' else 'En')}</a></li>
                        <li class="active"><a class="btn sign_min" href="${reverse('register_user')}">${_('Sign Up')}</a></li>
                        <li><a class="btn" href="${reverse('signin_user')}">${_('Login')}</a></li>
                        <li>
                            <button class="search-toggle"></button>
                            <form class="search" method="get" action="${reverse('courses')}">
                                <input type="search" name="search_query">
                            </form>
                        </li>
                    </ul>
                % endif
                
                <ul class="nav navbar-nav">
                    <li><a href="${reverse('courses')}">${_('Skills')}</a></li>
                    <li><a href="${reverse('about')}">${_('Why KKUx?')}</a></li>
                    <li><a href="${reverse('contact')}">${_('Contact')}</a></li>
                  % if request.user.is_staff:
                  <li>
                  <div class="dropdown">
                    <a class="dropdown-toggle"  data-toggle="dropdown">${_('FollowUp')}
                    <span class="caret"></span></a>
                    <ul class="dropdown-menu">

                      <li><a href="${reverse('followup_update',kwargs={'update':'True'})}">updated settings</a></li>
                      <li><a href="${reverse('followup_update',kwargs={'update':'False'})}">Not Updated settings</a></li>
                    </ul>
                  </div>
                </li>
                   <!--  <div class="dropdown">
                    <li class="followup"><a class="btn btn-primary dropdown-toggle"  data-toggle="dropdown">${_('FollowUp')}</a></li>
                    <ul class="dropdown-menu">
                      <li><a href="#">3rd level dropdown</a></li>
                      <li><a href="#">3rd level dropdown</a></li>
                    </ul>
                  </div> -->
                    <!-- <li><a href="${reverse('programs-list')}">${_('Programs')}</a></li> -->
                  % endif 
                 

                </ul>
                % if request.user.is_authenticated():
                    <ul class="right-top hidden-menu header-rightbar clearfix">
                        <li><a href="javascript:void(0);" class="language-btn btn" id="language-btn">${('ع' if LANGUAGE_CODE=='en' else 'En')}</a></li>
                        <li>
                            <button class="search-toggle"></button>
                            <form class="search" method="get" action="${reverse('courses')}">
                                <input type="search" name="search_query">
                            </form>
                        </li>
                        <%include file="user_dropdown.html"/>
                    </ul>            
                % else:
                    <ul class="right-top hidden-menu">
                        <li><a href="javascript:void(0);" class="language-btn btn" id="language-btn">${('ع' if LANGUAGE_CODE=='en' else 'En')}</a></li>
                        <li class="active"><a class="btn sign_min" href="${reverse('register_user')}">${_('Sign Up')}</a></li>
                        <li><a class="btn" href="${reverse('signin_user')}">${_('Login')}</a></li>
                        <li>
                            <button class="search-toggle"></button>
                            <form class="search" method="get" action="${reverse('courses')}">
                                <input type="search" name="search_query">
                            </form>
                        </li>
                    </ul>
                % endif
            </div><!--/.nav-collapse -->
        </div><!--/.container-fluid -->
    </nav>
</header>
<%block name="js_extra">
<script type="text/javascript">
  $( document ).ready(function() {
    $( "a#language-btn.language-btn" ).click(function() {
      $('#settings-language-value').val($('#settings-language-value option:not(:selected)').val()).trigger('change');
    });
  });
</script>
</%block>
