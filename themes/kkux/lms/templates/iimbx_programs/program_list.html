<%!
  import json
  import boto3
  from django.conf import settings
  from django.utils.translation import ugettext as _
  from openedx.core.djangolib.js_utils import dump_js_escaped_json
  from django.core.urlresolvers import reverse
%>
<%inherit file="../main.html" />

<%namespace name='static' file='../static_content.html'/>


<%block name="pagetitle">${_("Courses")}</%block>
<style type="text/css">
  .courses-container .courses .course .course-image .cover-image img{
      height: 157px;
  }
</style>
<main id="main" aria-label="Content" tabindex="-1">
    <section class="find-courses">
      <section class="courses-container">
       

        <div class="courses${'' if course_discovery_enabled else ' no-course-discovery'}" role="region" aria-label="${_('List of Courses')}">
          <ul class="courses-listing">
            %for course in programs:
            <li class="courses-listing-item">
     <% 
                conn = boto3.client('s3',aws_access_key_id=settings.AWS_ACCESS_KEY_ID,aws_secret_access_key=settings.AWS_SECRET_ACCESS_KEY,)
                
                image=course.banner_image.url.split("/")[-1]
              
                image_url = conn.generate_presigned_url(
                     'get_object',
                     Params = {
                            'Bucket': "kkux-storage" ,
                            'Key': image
                        },
                    
                 )
            %>                 
              <article class="course" id="${course.id}" role="region" aria-label="${course.name}">
                <a href="${reverse('program_about', kwargs=dict(program_id=course.id))}">
                  <header class="course-image">
                    <div class="cover-image">
                      <img src="${image_url}" alt="${course.name} " />
                      <div class="learn-more" aria-hidden="true">${_("LEARN MORE")}</div>
                    </div>
                  </header>
                  <div class="course-info" aria-hidden="true">
                    <h2 class="course-name">
                    
                      <span class="course-code">${course.short_description}</span>
                      <span class="course-title">${course.name}</span>
                    </h2>
                    
                  </div>
                  <div class="sr">
                    <ul> 
                    </ul>
                  </div>
                </a>
              </article>
              <%static:require_module_async module_name="js/dateutil_factory" class_name="DateUtilFactory">
                  DateUtilFactory.transform(iterationKey=".localized_datetime");
              </%static:require_module_async>

            </li>
            %endfor
          </ul>
        </div>
      </section>
    </section>
</main>
